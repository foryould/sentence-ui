(function(){"use strict";var t={7175:function(t,e,a){var i=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s=a(1001),o={},l=(0,s.Z)(o,n,r,!1,null,null,null),d=l.exports,c=a(2809),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"body-header"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("a",{attrs:{href:"javascript:;"}},[t._v("文本处理")])]),a("el-breadcrumb-item",[a("a",{attrs:{href:"javascript:;"}},[t._v("句子")])]),a("el-breadcrumb-item",[t._v(t._s(t.breadName))])],1)],1),a("div",{staticClass:"body"},[a("div",{staticClass:"nav"},[a("nav-menu")],1),a("div",{staticClass:"content tab-container"},[a("router-view")],1)])])},h=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-menu"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":t.activeIndex}},t._l(t.menuItems,(function(e){return a("el-menu-item",{key:e.id,attrs:{index:e.index}},[a("i",{staticClass:"iconfont",staticStyle:{"font-size":"20px"},domProps:{innerHTML:t._s(e.icon)}}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])})),1)],1)},m=[],f={name:"NavMenu",components:{},data(){return{menuItems:[{id:1,name:"诗词",index:"/",icon:"&#xeb8e;"},{id:2,name:"朝代",index:"/dynasty",icon:"&#xe6bc;"}]}},computed:{activeIndex(){return this.$route.path}}},y=f,v=(0,s.Z)(y,p,m,!1,null,null,null),b=v.exports,g={name:"HomePage",components:{NavMenu:b},data(){return{}},computed:{breadName(){return this.$route.name}}},w=g,_=(0,s.Z)(w,u,h,!1,null,"56707ec8",null),I=_.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dynasty-list"},[a("div",{staticClass:"dynasty-table"},[a("el-table",{attrs:{data:t.dynastyData,height:"100%",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100px",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"朝代名称",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.editItem(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"dynasty-actions"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addDynasty}},[t._v("添加朝代")])],1),a("el-dialog",{attrs:{title:t.editId?"编辑朝代":"添加朝代",visible:t.editShowing,width:"600px"},on:{"update:visible":function(e){t.editShowing=e}}},[t.edit?a("el-form",{ref:"form",attrs:{model:t.edit,"label-width":"70px",size:"small"}},[a("el-form-item",{attrs:{label:"朝代名",prop:"name",rules:[{required:!0,message:"朝代名称不能为空"},{validator:t.validataDynastyName}]}},[a("el-input",{attrs:{placeholder:"请输入朝代名称"},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name","string"===typeof e?e.trim():e)},expression:"edit.name"}})],1)],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.editShowing=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},S=[];a(1703);function k(t){if(null===t||"object"!==typeof t)return t;if(Array.isArray(t))return t.map(k);const e={};return Object.keys(t).forEach((a=>{e[a]=k(t[a])})),e}class D{constructor(t){this.key=t,this.data=this._loadData();let e=0;this.data.forEach((t=>{t.id>e&&(e=t.id)})),this.nextId=e+1}_loadData(){try{return JSON.parse(localStorage.getItem(this.key))||[]}catch(t){return[]}}_storeData(){localStorage.setItem(this.key,JSON.stringify(this.data))}list(t,e,a){let i=this.data;"function"===typeof t&&(i=i.filter(t));const n=i.length,r=k(i.slice((e-1)*a,e*a));return r.total=n,r}get(t){return k(this.data.find((e=>e.id===t)))}save(t){if(void 0===t.id){const e=this.nextId++;t.id=e,this.data.push(k(t))}else{const e=this.data.find((e=>e.id===t.id));if(!e)throw new Error("数据不存在");Object.assign(e,t)}return this._storeData(),t}delete(t){const e=this.data.findIndex((e=>e.id===t));if(-1===e)throw new Error("数据不存在");const a=this.data.splice(e,1)[0];return this._storeData(),a}}const C=new D("poetry"),$=new D("dynasty");var z={name:"DynastyList",data(){return{dynastyData:[],editId:void 0,edit:void 0,editShowing:!1}},created(){this.loadData()},methods:{loadData(){this.dynastyData=$.list(null,1,1e3)},addDynasty(){this.editId=void 0,this.edit={name:""},this.editShowing=!0},validataDynastyName(t,e,a){const i=$.list((t=>e===t.name&&(!this.editId||this.editId!==t.id)),1,1);i.length>0?a(new Error("朝代名不能重复")):a()},async save(){try{await this.$refs.form.validate()}catch{return}$.save({...this.edit,id:this.editId}),this.editShowing=!1,this.loadData()},editItem(t){this.editShowing=!0,this.editId=t.id,this.edit=t},async deleteItem(t){try{await this.$confirm("删除该项会同时删除所有引用该项的诗句，确定删除吗？",{title:"警告",type:"warning"})}catch{return}const e=C.list((e=>e.dynastyId===t.id),1,1e3);e.forEach((t=>{C["delete"](t.id)})),$["delete"](t.id),this.loadData()}}},O=z,E=(0,s.Z)(O,x,S,!1,null,"ebb3b878",null),j=E.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"poetry-list"},[a("div",{staticClass:"poetry-table"},[a("el-table",{attrs:{data:t.poetryData,height:"100%",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"#",width:"100px",align:"center"}}),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),a("el-table-column",{attrs:{prop:"dynasty",label:"朝代",align:"center"}}),a("el-table-column",{attrs:{prop:"author",label:"作者",align:"center"}}),a("el-table-column",{attrs:{pro:"",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.editItem(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",background:"",total:t.total,"page-size":t.pageSize,"current-page":t.page},on:{"current-change":t.onCurrentChange}})],1),a("div",{staticClass:"poetry-actions"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addPoetry}},[t._v("新增")])],1),a("el-dialog",{attrs:{title:t.editId?"编辑诗词":"添加诗词",visible:t.editShowing,width:"600px"},on:{"update:visible":function(e){t.editShowing=e}}},[t.edit?a("el-form",{ref:"form",attrs:{model:t.edit,"label-width":"70px",size:"small"}},[a("el-form-item",{attrs:{label:"作者",prop:"author",rules:[{required:!0,message:"作者不能为空"},{pattern:/^[\u4e00-\u9fa5]{2,10}$/,message:"请输入正确的作者名称，2-10个中文字符"}]}},[a("el-input",{attrs:{size:"small",placeholder:"2-10个字之间，仅支持中文"},model:{value:t.edit.author,callback:function(e){t.$set(t.edit,"author","string"===typeof e?e.trim():e)},expression:"edit.author"}})],1),a("el-form-item",{attrs:{label:"诗词",prop:"content",rules:[{required:!0,message:"请输入诗句"},{pattern:/^.{2,20}$/,message:"诗句必须是2-20个字符"}]}},[a("el-input",{attrs:{size:"small",placeholder:"诗句，2-20个字之间"},model:{value:t.edit.content,callback:function(e){t.$set(t.edit,"content",e)},expression:"edit.content"}})],1),a("el-form-item",{attrs:{label:"朝代",prop:"dynastyId",rules:[{required:!0,message:"请选择朝代"}]}},[a("el-select",{model:{value:t.edit.dynastyId,callback:function(e){t.$set(t.edit,"dynastyId",e)},expression:"edit.dynastyId"}},t._l(t.dynasties,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editShowing=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},M=[],Z={name:"PoetryList",data(){return{poetryData:[],total:0,pageSize:10,page:1,editId:void 0,edit:void 0,editShowing:!1,dynasties:[]}},created(){this.dynasties=$.list(null,1,1e3),this.dynastiesMap={},this.dynasties.forEach((t=>{this.dynastiesMap[t.id]=t})),this.loadData()},methods:{loadData(){this.poetryData=C.list(null,this.page,this.pageSize),this.total=this.poetryData.total,this.poetryData.forEach((t=>{t.dynasty=this.dynastiesMap[t.dynastyId].name}))},addPoetry(){this.editId=void 0,this.edit={content:"",dynastyId:void 0,author:""},this.editShowing=!0},async save(){try{await this.$refs.form.validate()}catch{return}C.save({...this.edit,id:this.editId}),this.editShowing=!1,this.loadData()},editItem(t){this.editShowing=!0,this.editId=t.id,this.edit=t},async deleteItem(t){try{await this.$confirm("确定删除该诗句吗？",{title:"警告",type:"warning"})}catch{return}C["delete"](t.id),this.loadData()},onCurrentChange(t){this.page=t,this.loadData()}}},N=Z,T=(0,s.Z)(N,P,M,!1,null,"640b6507",null),q=T.exports;i["default"].use(c.Z);const H=[{path:"/",name:"Home",component:I,children:[{path:"/dynasty",name:"朝代",component:j},{path:"/",name:"诗词",component:q}]}],L=new c.Z({routes:H});var A=L,J=a(4665);i["default"].use(J.ZP);var F=new J.ZP.Store({state:{},mutations:{},actions:{},modules:{}}),B=a(4549),G=a.n(B);i["default"].config.productionTip=!1,i["default"].use(G()),new i["default"]({router:A,store:F,render:t=>t(d)}).$mount("#app")}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,i,n,r){if(!i){var s=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],r=t[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(o=!1,r<s&&(s=r));if(o){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,s=i[0],o=i[1],l=i[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(e&&e(i);d<s.length;d++)r=s[d],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},i=self["webpackChunka"]=self["webpackChunka"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(7175)}));i=a.O(i)})();
//# sourceMappingURL=app.c66fa7ef.js.map